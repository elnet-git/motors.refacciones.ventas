<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro Rifa JQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .card {
      background: #1e1e1e;
      padding: 20px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 20px rgba(0,0,0,.6);
    }
    h1 {
      text-align: center;
      font-size: 22px;
      margin-bottom: 10px;
    }
    p {
      text-align: center;
      font-size: 14px;
      opacity: .9;
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }
    input {
      background: #2c2c2c;
      color: #fff;
    }
    button {
      background: #00c853;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #00e676;
    }
    .small {
      font-size: 12px;
      text-align: center;
      margin-top: 10px;
      opacity: .7;
    }
  </style>
</head>
<body><div class="card">
  <h1>Rifa JQ</h1>
  <p>Reg√≠strate y participa para ganar servicio o descuento</p>  <form id="registroForm">
    <input type="text" id="nombre" placeholder="Nombre" required>
    <input type="tel" id="telefono" placeholder="Tel√©fono" required>
    <input type="text" id="moto" placeholder="Moto / Modelo (opcional)">
    <button type="submit">Participar</button>
  </form>  <!-- Bot√≥n visible solo para administrador --><button id="btnGanador" style="margin-top:15px; background:#ff9800;">Elegir ganador (Admin)</button>

  <div class="small">Al registrarte aceptas ser contactado</div>
</div><script>
  const form = document.getElementById('registroForm');

  // Mostrar contador al cargar
  document.addEventListener('DOMContentLoaded', () => {
    const registros = JSON.parse(localStorage.getItem('registrosJQ')) || [];
    if (!document.getElementById('contador')) {
      const p = document.createElement('p');
      p.id = 'contador';
      p.style.textAlign = 'center';
      p.style.marginTop = '10px';
      p.textContent = `Participantes registrados: ${registros.length}`;
      document.querySelector('.card').appendChild(p);
    }
  });

  form.addEventListener('submit', function(e) {
    e.preventDefault();

    const ahora = new Date();
    const hora = ahora.getHours();

    // Fuera de horario: aviso + redirecci√≥n
    if (hora < 12 || hora >= 15) {
      alert('‚õî El registro solo est√° disponible de 12:00 PM a 3:00 PM');
      window.location.href = "https://elnet-git.github.io/motors.refacciones.ventas/";
      return;
    }

    const nombre = document.getElementById('nombre').value.trim();
    const telefono = document.getElementById('telefono').value.trim();
    const moto = document.getElementById('moto').value.trim();

    let registros = JSON.parse(localStorage.getItem('registrosJQ')) || [];

    // Evitar registros duplicados por tel√©fono
    const existe = registros.some(r => r.telefono === telefono);
    if (existe) {
      alert('‚ö†Ô∏è Este tel√©fono ya est√° registrado');
      window.location.href = "https://elnet-git.github.io/motors.refacciones.ventas/";
      return;
    }

    const registro = { nombre, telefono, moto, fecha: ahora.toLocaleString() };
    registros.push(registro);
    localStorage.setItem('registrosJQ', JSON.stringify(registros));

    // (Opcional) Env√≠o a Google Sheets v√≠a Apps Script
    /*
    fetch('PEGAR_AQUI_TU_URL_DE_GOOGLE_SCRIPT', {
      method: 'POST',
      body: JSON.stringify(registro),
      headers: { 'Content-Type': 'application/json' }
    });
    */

    alert('‚úÖ Registro exitoso');
    window.location.href = "https://elnet-git.github.io/motors.refacciones.ventas/";
  });

  // Funci√≥n para elegir ganador (ejecutar desde consola)
  // Funci√≥n para elegir ganador
  function elegirGanadorJQ() {
    const registros = JSON.parse(localStorage.getItem('registrosJQ')) || [];
    if (registros.length === 0) {
      alert('No hay participantes');
      return;
    }
    const ganador = registros[Math.floor(Math.random() * registros.length)];
    alert(`üéâ Ganador Rifa JQ:
${ganador.nombre}
Tel: ${ganador.telefono}`);
  }

  // Bot√≥n admin
  const btnGanador = document.getElementById('btnGanador');
  btnGanador.addEventListener('click', () => {
    const pass = prompt('Contrase√±a administrador');
    if (pass === 'JQ2025') {
      elegirGanadorJQ();
    } else {
      alert('‚ùå Contrase√±a incorrecta');
    }
  });() {
    const registros = JSON.parse(localStorage.getItem('registrosJQ')) || [];
    if (registros.length === 0) {
      alert('No hay participantes');
      return;
    }
    const ganador = registros[Math.floor(Math.random() * registros.length)];
    alert(`üéâ Ganador:
${ganador.nombre}
Tel: ${ganador.telefono}`);
  }
</script></body>
</html>